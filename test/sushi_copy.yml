
deck:
    cards:
        sushi-white-rice:
            count: 3
            attribute: ['M', 'sushi', 'rice', 'rice-like']
        sushi-red-rice:
            count: 3
            attribute: ['M', 'sushi', 'rice', 'rice-like']
        sushi-ikura:
            count: 2
            attribute: ['M', 'sushi']
        sushi-shirauo:
            count: 3
            attribute: ['M', 'sushi']
        sushi-uni:
            count: 3
            attribute: ['M2', 'sushi']
        kowakuma-trion:
            count: 3
            attribute: ['M', 'kowakuma']
        kowakuma-tio:
            count: 1
            attribute: ['M', 'kowakuma']
        kowakuma-ranka:
            count: 1
            attribute: ['M', 'kowakuma']
        kowakuma-jiner:
            count: 1
            attribute: ['M', 'kowakuma']

        ketsudann:
            count: 3
            attribute: ['H', 'sushi', 'rice-like']
        umisen:
            count: 1
            attribute: ['H', 'sushi']
        kiri-yami:
            count: 0
            attribute: ['H']
        kimagure:
            count: 2
            attribute: ['T', 'sushi']

        urara:
            count: 2
            attribute: ['M', 'hand-trap']
        zou-g:
            count: 3
            attribute: ['M', 'hand-trap']
        houyou:
            count: 3
            attribute: ['T', 'hand-trap', 'general-trap']
        other-trap:
            count: 7
            attribute: ['T', 'general-trap']
        
        others:
            count: 2

        # qyou-tan-tubo:
        #     count: 3
        #     description: '强贪壶'
        #     program: '[1]\(> |D| 11);(# D.10 J);@;(% 2)'
        qyou-ken-tubo:
            count: 3
            description: '强谦壶'
            program: '@;($ D.6 1 H)'
        # qyou-kin-tubo:
        #     count: 3
        #     description: '强金壶'
        #     program: '[^]@;(% 2);(! %)'
        # kin-ken-tubo:
        #     count: 1
        #     description: '金谦壶'
        #     program: '[1]@;($ D.6 1 H);(! %)'
        # kotuchi:
        #     count: 3
        #     description: '万宝槌'
        #     program: '(= "x (- |H.!a:sushi| 1));/(> x 1);@;(# H.!a:sushi D);(% x)'
        # munorengoku:
        #     count: 1
        #     description: '无之炼狱'
        #     program: '/(> |H| 2);@;(% 1)'
        # tehuda-masatu:
        #     count: 1
        #     description: '手牌抹杀'
        #     program: '@;(= "x |H|);(# H B);(% x)'
        # inochi-housatu:
        #     count: 3
        #     description: '削命'
        #     program: '[1](= "x |H.a:mahou| );(= "y |H.a:trap|);(= "z (> |H.a:M| 0));(= "k (+ x (+ y z)));(= "h (- |H| k));\(> 4 h);@;(% (- 3 h))'
        # cup-of-ace:
        #     count: 3
        #     description: '圣杯A'
        #     program: '@;/(> (r 0 1) 0);(% 2)'


        
    conditions:
        Sushi: a:sushi A:M?
        Sushi5: a:sushi a:M2
        Sushi4-Non-Rice: a:sushi a:M !a:rice
        Sushi-Non-Rice: Sushi !a:rice
        Kowakuma: a:kowakuma a:M
simulate:
    count: 1000
    tests:
        test-expend:
            exec-program: true
            combos:
                A1:
                    score: 3.5 #freshia(1.5) + 4 hand-card(0.5)
                    action: "draw"
                    conditions:
                        - a:rice
                        - a:rice-like
                A3:
                    score: 5.5 #freshia(1.5) + 0.6*trip(1.0) + sera(2.0) + 3*hand-card(0.5)
                    conditions:
                        - a:rice
                        - a:rice-like
                        - Kowakuma
                        - a:T
                B1:
                    score: 1.5 #freshia(1.5) + 3 hand(0.5)
                    conditions:
                        - sushi-ikura
                        - a:rice-like
                B2:
                    score: 3.2 #kuubo(0.2) + 4 hand(0.5) + kimagure (1.0)
                    conditions:
                        - sushi-shirauo
                        - a:rice-like
                B3:
                    score: 4.7 #kuubo(0.2) + freshia(1.5) + 4 hand(0.5) + kimagure(1.0)
                    conditions:
                        - sushi-ikura
                        - sushi-shirauo
                        - a:rice-like
                B4:
                    score: 5.7 #kuubo(0.2) + sera(2.0) + trip(1.0) + 3 hand(0.5) + kimagure(1.0)
                    conditions:
                        - sushi-ikura
                        - sushi-shirauo
                        - a:rice-like
                        - a:T
                C1:
                    score: 3.0 #r5(0.5) + 5 hand(0.5)
                    conditions:
                        - Sushi5
                        - a:rice-like
                C2:
                    score: 3.5 #r5(0.5) + 3 hand(0.5) + fureshia(1.5)
                    conditions:
                        - Sushi5
                        - a:rice-like
                        - Sushi4-Non-Rice
                C3:
                    score: 4.5 #r5(0.5) + 3 hand(0.5) + 0.6*trap(1.0) + sera 2.0
                    conditions:
                        - Sushi5
                        - a:rice-like
                        - Kowakuma
                        - a:T
                D1:
                    score: 5.0 #sera(2.0) + 2*trap(1.0) + 2*hand(0.5)
                    conditions:
                        - Kowakuma
                        - a:T
                        - a:T
        test-hand-trap:
            start-card: 6
            combos:
                HT1:
                    score: 1.0
                    conditions:
                        - a:hand-trap
                HT2:
                    score: 2.0
                    conditions:
                        - a:hand-trap
                        - a:hand-trap




        
    


